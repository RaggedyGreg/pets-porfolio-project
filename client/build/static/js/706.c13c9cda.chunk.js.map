{"version":3,"file":"static/js/706.c13c9cda.chunk.js","mappings":"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","sources":["interfaces/interfaces.ts","views/Detail/Detail.tsx","hooks/useFetchDetail.ts"],"sourcesContent":["export interface BasePet {\n  id: number;\n  name: string;\n  kind: string;\n  weight: number;\n  height: number;\n  length: number;\n  photo_url: string;\n  description: string;\n}\n\nexport interface DogPet extends BasePet {\n  kind: \"dog\";\n}\n\nexport interface CatPet extends BasePet {\n  kind: \"cat\";\n  number_of_lives: number;\n}\n\nexport interface BirdPet extends BasePet {\n  kind: \"bird\";\n  num_of_feathers: number;\n  wingspan: number;\n}\n\nexport type Pet = DogPet | CatPet | BirdPet;\n\nexport function isDog(pet: Pet): pet is DogPet {\n  return pet.kind === \"dog\";\n}\n\nexport function isCat(pet: Pet): pet is CatPet {\n  return pet.kind === \"cat\";\n}\n\nexport function isBird(pet: Pet): pet is BirdPet {\n  return pet.kind === \"bird\";\n}\n\nexport type HealthStatus = \"unhealthy\" | \"healthy\" | \"very healthy\";\n\nexport type ApiResponse = { rows: Pet[]; totalCount: number };\n\nexport interface PetPaginationModel {\n  pageSize: number;\n  page: number;\n}\n\nexport type SortOptions = \"asc\" | \"desc\"  ;\n\nexport interface PetSortModel {\n  sortField: string;\n  sortOrder: SortOptions\n}\n\nexport type ApiResponseDetail = Pet;\n","import { useNavigate, useParams } from \"react-router-dom\";\nimport { Box } from \"@mui/system\";\nimport {\n  Avatar,\n  CircularProgress,\n  Grid,\n  List,\n  ListItem,\n  ListItemText,\n  Typography,\n  Alert,\n  AlertTitle,\n  Button,\n} from \"@mui/material\";\nimport { isCat, isBird } from \"../../interfaces/interfaces\";\nimport { ArrowBack } from \"@mui/icons-material\";\nimport { useTranslation } from \"react-i18next\";\nimport { useFetchDetail } from \"../../hooks/useFetchDetail\";\nimport { notFound } from \"../../icons/icons\";\nimport { chooseImage } from \"../../utils/utils\";\nimport { Health } from \"../../components/Health/Health\";\nimport { endpoints } from \"../../config/api\";\n\nconst Detail = () => {\n  const { t } = useTranslation();\n  const { id } = useParams();\n  const navigate = useNavigate();\n\n  const { data, loading, error } = useFetchDetail(\n    endpoints.getPetDetail(id || '')\n  );\n\n  return !data && loading ? (\n    <CircularProgress />\n  ) : error || !data ? (\n    <Box p={3}>\n      <Alert severity=\"error\">\n        <AlertTitle>{t(\"detail.error.title\", \"Pet Not Found\")}</AlertTitle>\n        {t(\n          \"detail.error.message\",\n          \"We couldn't find the pet you're looking for. It may have been removed or the ID is incorrect.\"\n        )}\n        <Box sx={{ mt: 2 }}>\n          <Button variant=\"contained\" onClick={() => navigate(\"/\")}>\n            {t(\"detail.error.backHome\", \"Back to Home\")}\n          </Button>\n        </Box>\n      </Alert>\n    </Box>\n  ) : (\n    <>\n      <Box \n        onClick={() => navigate(`/`)} \n        sx={{ cursor: \"pointer\" }} \n        p={1}\n        role=\"button\"\n        tabIndex={0}\n        onKeyPress={(e) => e.key === 'Enter' && navigate('/')}\n        aria-label={t(\"detail.backToHome\", \"Go back to home page\")}\n      >\n        <Avatar>\n          <ArrowBack />\n        </Avatar>\n      </Box>\n      <Grid container p={3} spacing={2} component=\"main\" aria-label={t(\"detail.mainContent\", \"Pet details\")}>\n        <Grid item md={6} textAlign=\"center\">\n          <img\n            data-testid=\"bigImage\"\n            alt={t(\"detail.imageAlt\", \"Photo of {{name}}\", { name: data?.name })}\n            height={200}\n            src={data?.photo_url}\n            onError={({ currentTarget }) => {\n              currentTarget.onerror = null; // prevents looping\n              currentTarget.src = notFound;\n            }}\n          />\n        </Grid>\n        <Grid item md={6}>\n          <Typography variant=\"h4\" component=\"h1\" id=\"pet-name\">\n            {data?.name}\n          </Typography>\n          <List sx={{ flexFlow: \"column wrap\" }} aria-labelledby=\"pet-name\">\n            <ListItem>\n              <ListItemText primary={t(\"detail.weight\")} secondary={data?.weight} />\n            </ListItem>\n            <ListItem>\n              <ListItemText primary={t(\"detail.height\")}  secondary={data?.height} />\n            </ListItem>\n            <ListItem>\n              <ListItemText primary={t(\"detail.length\")} secondary={data?.length} />\n            </ListItem>\n            {isCat(data) && (\n              <ListItem>\n                <ListItemText\n                  primary={t(\"detail.numberOfLives\")}\n                  secondary={data.number_of_lives}\n                />\n              </ListItem>\n            )}\n            {isBird(data) && (\n              <>\n                <ListItem>\n                  <ListItemText\n                    primary={t(\"detail.wingspan\")}\n                    secondary={`${data.wingspan} cm`}\n                  />\n                </ListItem>\n                <ListItem>\n                  <ListItemText\n                    primary={t(\"detail.numOfFeathers\")}\n                    secondary={data.num_of_feathers}\n                  />\n                </ListItem>\n              </>\n            )}\n            <ListItem>\n              <ListItemText\n                primary={t(\"detail.description\")}\n                secondary={data?.description}\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemText\n                primary={t(\"detail.kind\")}\n                secondary={<img data-testid=\"kindImage\"\n                alt=\"Pet\" height={30}\n                src={chooseImage(data?.kind)}\n              />} />\n            </ListItem>\n            <ListItem>\n              <ListItemText \n                data-testid=\"health\"\n                primary={t(\"detail.health\")}\n                secondary={<Health pet={data}/>}\n              />\n            </ListItem>\n          </List>\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n\nexport default Detail;\n","import { useState, useEffect, useRef } from \"react\";\nimport { ApiResponseDetail } from \"../interfaces/interfaces\";\nimport { getPetById } from \"../services/mockData\";\n\n/**\n * Custom hook for fetching individual pet details\n * Includes abort signal support and automatic retry logic\n */\nexport const useFetchDetail = (url: string, maxRetries: number = 2) => {\n  const [data, setData] = useState<ApiResponseDetail | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<Error | null>(null);\n  const [retryCount, setRetryCount] = useState<number>(0);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      // Cancel previous request if it exists\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n\n      // Create new AbortController for this request\n      abortControllerRef.current = new AbortController();\n      const signal = abortControllerRef.current.signal;\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        // Simulate network delay for realistic behavior\n        await new Promise((resolve, reject) => {\n          const timeout = setTimeout(resolve, 200);\n          signal.addEventListener('abort', () => {\n            clearTimeout(timeout);\n            reject(new Error('Request aborted'));\n          });\n        });\n\n        // Check if aborted\n        if (signal.aborted) {\n          throw new Error('Request aborted');\n        }\n\n        // Extract ID from URL (supports both /pets/123 and /pets/:id patterns)\n        const idMatch = url.match(/\\/(\\d+)$/);\n        const petId = idMatch ? parseInt(idMatch[1], 10) : null;\n\n        if (petId === null) {\n          throw new Error(\"Invalid pet ID\");\n        }\n\n        // Use mock data service\n        const pet = getPetById(petId);\n\n        if (!pet) {\n          throw new Error(\"Pet not found\");\n        }\n\n        if (!signal.aborted) {\n          setData(pet);\n          setRetryCount(0); // Reset retry count on success\n        }\n      } catch (err) {\n        if (!signal.aborted) {\n          const errorObj = err instanceof Error ? err : new Error(\"Failed to load pet details\");\n          \n          // Retry logic\n          if (retryCount < maxRetries && errorObj.message !== \"Pet not found\") {\n            setRetryCount(prev => prev + 1);\n          } else {\n            setError(errorObj);\n          }\n        }\n      } finally {\n        if (!signal.aborted) {\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchData();\n\n    // Cleanup function to abort request on unmount or when URL changes\n    return () => {\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n    };\n  }, [url, retryCount, maxRetries]);\n\n  return { data, loading, error };\n};\n"],"names":["isBird","pet","kind","Detail","t","useTranslation","id","useParams","navigate","useNavigate","data","loading","error","url","maxRetries","arguments","length","undefined","setData","useState","setLoading","setError","retryCount","setRetryCount","abortControllerRef","useRef","useEffect","async","current","abort","AbortController","signal","Promise","resolve","reject","timeout","setTimeout","addEventListener","clearTimeout","Error","aborted","idMatch","match","petId","parseInt","getPetById","err","errorObj","message","prev","fetchData","useFetchDetail","endpoints","getPetDetail","_jsx","CircularProgress","Box","p","children","_jsxs","Alert","severity","AlertTitle","sx","mt","Button","variant","onClick","_Fragment","cursor","role","tabIndex","onKeyPress","e","key","Avatar","ArrowBack","Grid","container","spacing","component","item","md","textAlign","alt","name","height","src","photo_url","onError","_ref","currentTarget","onerror","notFound","Typography","List","flexFlow","ListItem","ListItemText","primary","secondary","weight","number_of_lives","concat","wingspan","num_of_feathers","description","chooseImage","Health"],"sourceRoot":""}