{"version":3,"file":"static/js/341.9f2342c1.chunk.js","mappings":"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","sources":["views/Home/PetOfTheDay.tsx","components/PetTableRow/PetTableRow.tsx","views/Home/Home.tsx","hooks/useFetch.ts"],"sourcesContent":["import { FC, useEffect } from \"react\";\nimport { Button } from \"@mui/material\";\nimport { getCookie, setCookie } from \"../../utils/utils\";\nimport { useNavigate } from \"react-router\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface PetOfTheDayProps {\n  maxPets: number;\n}\n\nconst PET_OF_THE_DAY_STORAGE = \"pet-of-the-day\";\n\nexport const PetOfTheDay: FC<PetOfTheDayProps> = ({ maxPets }) => {\n\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n\n  const secondsUntilMidnight = ():number => {\n    const now = new Date();\n    const midnight = new Date(now);\n    midnight.setHours(24, 0, 0, 0); \n    const difference = midnight.getTime() - now.getTime();\n    return Math.floor(difference / 1000); \n  };\n\n  useEffect(() => {\n    if (maxPets > 0) {\n      let cookieValue = getCookie(PET_OF_THE_DAY_STORAGE);\n      if (!cookieValue) {\n        cookieValue = String(Math.floor(Math.random() * maxPets));\n        \n        setCookie(PET_OF_THE_DAY_STORAGE, cookieValue, secondsUntilMidnight());\n      } \n    }\n  }, [maxPets]);\n\n  const handleClick = () => { \n    navigate(`detail/${getCookie(PET_OF_THE_DAY_STORAGE)}`)\n  }\n\n  return (\n    <Button variant=\"contained\" onClick={handleClick}>{t(\"petToday.text\")}</Button>\n  );\n};\n","import React, { memo } from 'react';\nimport { TableRow, TableCell } from '@mui/material';\nimport { Pet } from '../../interfaces/interfaces';\nimport { chooseImage } from '../../utils/utils';\nimport { notFound } from '../../icons/icons';\nimport { Health } from '../Health/Health';\nimport { useTranslation } from 'react-i18next';\n\ninterface PetTableRowProps {\n  pet: Pet;\n  onRowClick: (id: number) => void;\n}\n\nexport const PetTableRow: React.FC<PetTableRowProps> = memo(({ pet, onRowClick }) => {\n  const { t } = useTranslation();\n\n  const handleClick = () => {\n    onRowClick(pet.id);\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      onRowClick(pet.id);\n    }\n  };\n\n  return (\n    <TableRow\n      hover\n      sx={{ cursor: 'pointer' }}\n      onClick={handleClick}\n      tabIndex={0}\n      role=\"button\"\n      onKeyPress={handleKeyPress}\n      aria-label={t('home.table.rowAria', 'View details for {{name}}', { name: pet.name })}\n    >\n      <TableCell component=\"th\" scope=\"row\">\n        {pet.name}\n      </TableCell>\n      <TableCell align=\"right\">\n        <img\n          height={40}\n          src={chooseImage(pet.kind)}\n          alt={t('home.table.kindIcon', '{{kind}} icon', { kind: pet.kind })}\n          onError={({ currentTarget }) => {\n            currentTarget.onerror = null;\n            currentTarget.src = notFound;\n          }}\n        />\n      </TableCell>\n      <TableCell align=\"right\">{pet.weight}</TableCell>\n      <TableCell align=\"right\">{pet.height}</TableCell>\n      <TableCell align=\"right\">{pet.length}</TableCell>\n      <TableCell align=\"right\" data-testid=\"health\">\n        <Health pet={pet} />\n      </TableCell>\n    </TableRow>\n  );\n}, (prevProps, nextProps) => {\n  // Only re-render if the pet data changes\n  return (\n    prevProps.pet.id === nextProps.pet.id &&\n    prevProps.pet.name === nextProps.pet.name &&\n    prevProps.pet.weight === nextProps.pet.weight &&\n    prevProps.pet.height === nextProps.pet.height &&\n    prevProps.pet.length === nextProps.pet.length &&\n    prevProps.pet.kind === nextProps.pet.kind\n  );\n});\n\nPetTableRow.displayName = 'PetTableRow';\n","import { notFound } from \"../../icons/icons\";\nimport { useEffect, useState, useMemo, useCallback } from \"react\";\nimport { useFetch } from \"../../hooks/useFetch\";\nimport {\n  PetPaginationModel,\n  PetSortModel,\n  SortOptions,\n} from \"../../interfaces/interfaces\";\nimport {\n  Paper,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n  TablePagination,\n  CircularProgress,\n  TableSortLabel,\n  Stack,\n  Alert,\n  AlertTitle,\n  Button,\n  Box,\n  TextField,\n  InputAdornment,\n  Chip,\n} from \"@mui/material\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport FilterListIcon from \"@mui/icons-material/FilterList\";\n\nimport variables from \"../../scss/variables.module.scss\";\nimport { useNavigate } from \"react-router-dom\";\nimport { chooseImage } from \"../../utils/utils\";\nimport { useTranslation } from \"react-i18next\";\nimport { PetOfTheDay } from \"./PetOfTheDay\";\nimport { endpoints } from \"../../config/api\";\nimport { PetTableRow } from \"../../components/PetTableRow/PetTableRow\";\n\nconst PAGINATION_MODEL_STORAGE = \"paginationModel\";\nconst SORT_MODEL_STORAGE = \"sortModel\";\nconst SEARCH_STORAGE = \"searchQuery\";\nconst FILTER_STORAGE = \"petTypeFilter\";\n\nconst Home = () => {\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const [paginationModel, setPaginationModel] = useState<PetPaginationModel>({\n    pageSize: 5,\n    page: 0,\n  });\n  const [sortModel, setSortModel] = useState<PetSortModel>({\n    sortField: \"\",\n    sortOrder: \"desc\",\n  });\n  const [searchQuery, setSearchQuery] = useState<string>(\"\");\n  const [petTypeFilter, setPetTypeFilter] = useState<string[]>([]);\n  const { data, loading, error } = useFetch(\n    endpoints.getPets(),\n    paginationModel,\n    sortModel\n  );\n\n  useEffect(() => {\n    const storedSortModel = sessionStorage.getItem(SORT_MODEL_STORAGE);\n    const storedPaginationModel = sessionStorage.getItem(\n      PAGINATION_MODEL_STORAGE\n    );\n    const storedSearch = sessionStorage.getItem(SEARCH_STORAGE);\n    const storedFilter = sessionStorage.getItem(FILTER_STORAGE);\n    \n    if (storedSortModel) {\n      setSortModel(JSON.parse(storedSortModel));\n    }\n    if (storedPaginationModel) {\n      setPaginationModel(JSON.parse(storedPaginationModel));\n    }\n    if (storedSearch) {\n      setSearchQuery(storedSearch);\n    }\n    if (storedFilter) {\n      setPetTypeFilter(JSON.parse(storedFilter));\n    }\n  }, []);\n\n  const handleChangePage = (\n    event: React.MouseEvent<HTMLButtonElement> | null,\n    newpage: number\n  ) => {\n    const newPaginationModel = { ...paginationModel, page: newpage };\n    setPaginationModel(newPaginationModel);\n    sessionStorage.setItem(\n      PAGINATION_MODEL_STORAGE,\n      JSON.stringify(newPaginationModel)\n    );\n  };\n\n  const handleChangeRowsPerPage = (event: any) => {\n    const newPaginationModel = { page: 0, pageSize: event.target.value };\n    setPaginationModel(newPaginationModel);\n    sessionStorage.setItem(\n      PAGINATION_MODEL_STORAGE,\n      JSON.stringify(newPaginationModel)\n    );\n  };\n\n  const handleClickRow = useCallback((id: number) => {\n    navigate(`detail/${id}`);\n  }, [navigate]);\n\n  const handleSort = useCallback((field: string) => {\n    setSortModel((prevSortModel) => {\n      const isSameField = prevSortModel.sortField === field;\n      const order: SortOptions = isSameField && prevSortModel.sortOrder === \"asc\" ? \"desc\" : \"asc\";\n\n      const newSortOrder = {\n        sortField: field,\n        sortOrder: order,\n      };\n\n      sessionStorage.setItem(SORT_MODEL_STORAGE, JSON.stringify(newSortOrder));\n      return newSortOrder;\n    });\n  }, []);\n\n  const createSortLabel = useCallback((field: string, label: string) => (\n    <TableSortLabel\n      active={sortModel.sortField === field}\n      direction={sortModel.sortField === field ? sortModel.sortOrder : \"asc\"}\n      onClick={() => handleSort(field)}\n    >\n      {label}\n    </TableSortLabel>\n  ), [sortModel.sortField, sortModel.sortOrder, handleSort]);\n\n  const handleSearchChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const query = event.target.value;\n    setSearchQuery(query);\n    sessionStorage.setItem(SEARCH_STORAGE, query);\n    setPaginationModel({ ...paginationModel, page: 0 });\n  };\n\n  const handleFilterToggle = useCallback((type: string) => {\n    setPetTypeFilter((prevFilters) => {\n      const newFilters = prevFilters.includes(type)\n        ? prevFilters.filter((t) => t !== type)\n        : [...prevFilters, type];\n      \n      sessionStorage.setItem(FILTER_STORAGE, JSON.stringify(newFilters));\n      return newFilters;\n    });\n    setPaginationModel((prev) => ({ ...prev, page: 0 }));\n  }, []);\n\n  // Filter and search data - memoized for performance\n  const filteredData = useMemo(() => {\n    if (!data?.rows) return [];\n    \n    return data.rows.filter((pet) => {\n      const matchesSearch = pet.name.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesFilter = petTypeFilter.length === 0 || petTypeFilter.includes(pet.kind);\n      return matchesSearch && matchesFilter;\n    });\n  }, [data?.rows, searchQuery, petTypeFilter]);\n\n  const filteredTotalCount = filteredData.length;\n\n  return loading ? (\n    <CircularProgress />\n  ) : error ? (\n    <Box sx={{ p: 3 }}>\n      <Alert severity=\"error\">\n        <AlertTitle>{t(\"home.error.title\", \"Error Loading Pets\")}</AlertTitle>\n        {t(\n          \"home.error.message\",\n          \"Unable to load pets. Please check your connection and try again.\"\n        )}\n        <Box sx={{ mt: 2 }}>\n          <Button\n            variant=\"contained\"\n            onClick={() => window.location.reload()}\n          >\n            {t(\"home.error.retry\", \"Retry\")}\n          </Button>\n        </Box>\n      </Alert>\n    </Box>\n  ) : (\n    <Stack pt={2} spacing={2}>\n      <PetOfTheDay maxPets={data?.totalCount || 0} />\n      \n      {/* Search and Filter Section */}\n      <Paper sx={{ p: 2 }}>\n        <Stack spacing={2}>\n          <TextField\n            fullWidth\n            placeholder={t(\"home.search.placeholder\", \"Search pets by name...\")}\n            value={searchQuery}\n            onChange={handleSearchChange}\n            inputProps={{\n              'aria-label': t(\"home.search.ariaLabel\", \"Search pets by name\"),\n              'role': 'searchbox'\n            }}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <SearchIcon aria-hidden=\"true\" />\n                </InputAdornment>\n              ),\n            }}\n          />\n          \n          <Box \n            sx={{ display: \"flex\", alignItems: \"center\", gap: 1, flexWrap: \"wrap\" }}\n            role=\"group\"\n            aria-label={t(\"home.filter.ariaLabel\", \"Filter pets by type\")}\n          >\n            <FilterListIcon sx={{ color: \"text.secondary\" }} aria-hidden=\"true\" />\n            <Chip\n              label={t(\"home.filter.dog\", \"Dogs\")}\n              onClick={() => handleFilterToggle(\"dog\")}\n              color={petTypeFilter.includes(\"dog\") ? \"primary\" : \"default\"}\n              variant={petTypeFilter.includes(\"dog\") ? \"filled\" : \"outlined\"}\n              aria-pressed={petTypeFilter.includes(\"dog\")}\n              aria-label={t(\"home.filter.dogAria\", \"Filter by dogs\")}\n            />\n            <Chip\n              label={t(\"home.filter.cat\", \"Cats\")}\n              onClick={() => handleFilterToggle(\"cat\")}\n              color={petTypeFilter.includes(\"cat\") ? \"primary\" : \"default\"}\n              variant={petTypeFilter.includes(\"cat\") ? \"filled\" : \"outlined\"}\n              aria-pressed={petTypeFilter.includes(\"cat\")}\n              aria-label={t(\"home.filter.catAria\", \"Filter by cats\")}\n            />\n            <Chip\n              label={t(\"home.filter.bird\", \"Birds\")}\n              onClick={() => handleFilterToggle(\"bird\")}\n              color={petTypeFilter.includes(\"bird\") ? \"primary\" : \"default\"}\n              variant={petTypeFilter.includes(\"bird\") ? \"filled\" : \"outlined\"}\n              aria-pressed={petTypeFilter.includes(\"bird\")}\n              aria-label={t(\"home.filter.birdAria\", \"Filter by birds\")}\n            />\n            {(searchQuery || petTypeFilter.length > 0) && (\n              <Chip\n                label={t(\"home.filter.clear\", \"Clear All\")}\n                onClick={() => {\n                  setSearchQuery(\"\");\n                  setPetTypeFilter([]);\n                  sessionStorage.removeItem(SEARCH_STORAGE);\n                  sessionStorage.removeItem(FILTER_STORAGE);\n                }}\n                variant=\"outlined\"\n                onDelete={() => {\n                  setSearchQuery(\"\");\n                  setPetTypeFilter([]);\n                  sessionStorage.removeItem(SEARCH_STORAGE);\n                  sessionStorage.removeItem(FILTER_STORAGE);\n                }}\n                aria-label={t(\"home.filter.clearAria\", \"Clear all filters and search\")}\n              />\n            )}\n          </Box>\n        </Stack>\n      </Paper>\n      \n      <TableContainer component={Paper}>\n        <Table sx={{ minWidth: 650 }} aria-label={t(\"home.table.ariaLabel\", \"Pet list table\")}>\n          <TableHead>\n            <TableRow>\n              <TableCell>\n                {createSortLabel(\"name\", t(\"home.table.header.name\"))}\n              </TableCell>\n              <TableCell align=\"right\">\n                {createSortLabel(\"kind\", t(\"home.table.header.kind\"))}\n              </TableCell>\n              <TableCell align=\"right\">\n                {createSortLabel(\"weight\", t(\"home.table.header.weight\"))}\n              </TableCell>\n              <TableCell align=\"right\">\n                {createSortLabel(\"height\", t(\"home.table.header.height\"))}\n              </TableCell>\n              <TableCell align=\"right\">\n                {createSortLabel(\"length\", t(\"home.table.header.length\"))}\n              </TableCell>\n              <TableCell align=\"right\">\n                {t(\"home.table.header.health\", \"Health\")}\n              </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {loading ? (\n              <TableRow>\n                <TableCell colSpan={6} align=\"center\">\n                  <CircularProgress />\n                </TableCell>\n              </TableRow>\n            ) : (\n              filteredData.map((pet) => (\n                <PetTableRow\n                  key={pet.id}\n                  pet={pet}\n                  onRowClick={handleClickRow}\n                />\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      <TablePagination\n        component=\"div\"\n        rowsPerPageOptions={[5, 10, 15, 25]}\n        count={filteredTotalCount}\n        page={paginationModel.page}\n        rowsPerPage={paginationModel.pageSize}\n        onPageChange={handleChangePage}\n        onRowsPerPageChange={handleChangeRowsPerPage}\n      />\n    </Stack>\n  );\n};\n\nexport default Home;\n","import { useState, useEffect, useRef } from \"react\";\nimport { ApiResponse, PetPaginationModel, PetSortModel } from \"../interfaces/interfaces\";\nimport { getPaginatedPets } from \"../services/mockData\";\n\n/**\n * Custom hook for fetching paginated and sorted pet data\n * Includes abort signal support and automatic retry logic\n */\nexport const useFetch = (\n  url: string, \n  paginationModel: PetPaginationModel, \n  sortModel: PetSortModel,\n  maxRetries: number = 2\n) => {\n  const [data, setData] = useState<ApiResponse | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<Error | null>(null);\n  const [retryCount, setRetryCount] = useState<number>(0);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      // Cancel previous request if it exists\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n\n      // Create new AbortController for this request\n      abortControllerRef.current = new AbortController();\n      const signal = abortControllerRef.current.signal;\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        // Simulate network delay for realistic behavior\n        await new Promise((resolve, reject) => {\n          const timeout = setTimeout(resolve, 300);\n          signal.addEventListener('abort', () => {\n            clearTimeout(timeout);\n            reject(new Error('Request aborted'));\n          });\n        });\n\n        // Check if aborted\n        if (signal.aborted) {\n          throw new Error('Request aborted');\n        }\n\n        // Use mock data service\n        const result = getPaginatedPets(\n          paginationModel.page,\n          paginationModel.pageSize,\n          sortModel.sortField,\n          sortModel.sortOrder\n        );\n\n        if (!signal.aborted) {\n          setData({ \n            rows: result.data, \n            totalCount: result.total \n          });\n          setRetryCount(0); // Reset retry count on success\n        }\n      } catch (err) {\n        if (!signal.aborted) {\n          const errorObj = err instanceof Error ? err : new Error(\"Failed to load pets\");\n          \n          // Retry logic for transient errors\n          if (retryCount < maxRetries) {\n            setRetryCount(prev => prev + 1);\n          } else {\n            setError(errorObj);\n          }\n        }\n      } finally {\n        if (!signal.aborted) {\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchData();\n\n    // Cleanup function to abort request on unmount or when dependencies change\n    return () => {\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n    };\n  }, [paginationModel.page, paginationModel.pageSize, sortModel.sortField, sortModel.sortOrder, retryCount, maxRetries]);\n\n  return { data, loading, error };\n};\n"],"names":["PET_OF_THE_DAY_STORAGE","PetOfTheDay","_ref","maxPets","navigate","useNavigate","t","useTranslation","useEffect","cookieValue","getCookie","String","Math","floor","random","setCookie","secondsUntilMidnight","now","Date","midnight","setHours","difference","getTime","_jsx","Button","variant","onClick","handleClick","concat","children","PetTableRow","memo","pet","onRowClick","_jsxs","TableRow","hover","sx","cursor","id","tabIndex","role","onKeyPress","e","key","name","TableCell","component","scope","align","height","src","chooseImage","kind","alt","onError","_ref2","currentTarget","onerror","notFound","weight","length","Health","prevProps","nextProps","displayName","PAGINATION_MODEL_STORAGE","SORT_MODEL_STORAGE","SEARCH_STORAGE","FILTER_STORAGE","Home","paginationModel","setPaginationModel","useState","pageSize","page","sortModel","setSortModel","sortField","sortOrder","searchQuery","setSearchQuery","petTypeFilter","setPetTypeFilter","data","loading","error","url","maxRetries","arguments","undefined","setData","setLoading","setError","retryCount","setRetryCount","abortControllerRef","useRef","async","current","abort","AbortController","signal","Promise","resolve","reject","timeout","setTimeout","addEventListener","clearTimeout","Error","aborted","result","getPaginatedPets","rows","totalCount","total","err","errorObj","prev","fetchData","useFetch","endpoints","getPets","storedSortModel","sessionStorage","getItem","storedPaginationModel","storedSearch","storedFilter","JSON","parse","handleClickRow","useCallback","handleSort","field","prevSortModel","order","newSortOrder","setItem","stringify","createSortLabel","label","TableSortLabel","active","direction","handleFilterToggle","type","prevFilters","newFilters","includes","filter","filteredData","useMemo","matchesSearch","toLowerCase","matchesFilter","filteredTotalCount","CircularProgress","Box","p","Alert","severity","AlertTitle","mt","window","location","reload","Stack","pt","spacing","Paper","TextField","fullWidth","placeholder","value","onChange","event","query","target","inputProps","InputProps","startAdornment","InputAdornment","position","SearchIcon","display","alignItems","gap","flexWrap","FilterListIcon","color","Chip","removeItem","onDelete","TableContainer","Table","minWidth","TableHead","TableBody","colSpan","map","TablePagination","rowsPerPageOptions","count","rowsPerPage","onPageChange","handleChangePage","newpage","newPaginationModel","onRowsPerPageChange"],"sourceRoot":""}